<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Title</title>
    </head>
    <body>
      <!-- Profile dropdown -->
      <div class="ml-3 relative">
        <div>
          <button class="max-w-xs flex items-center text-sm rounded-full focus:outline-none focus:shadow-outline" id="user-menu" aria-label="User menu" aria-haspopup="true" onclick="ShowDropdown('user-dropdown-menu');">
              <span class="inline-flex items-center justify-center h-8 w-8 rounded-full bg-gray-200">
                  {% if current_user.name %}
                    <span class="text-sm font-medium leading-none text-gray-500">{{ current_user.name|initial_filter }}</span>
                  {% else %}
                    <i class="si si-user"></i>
                  {% endif %}
              </span>
          </button>
        </div>
        <!--
          Profile dropdown panel, show/hide based on dropdown state.

          Entering: "transition ease-out duration-100"
            From: "transform opacity-0 scale-95"
            To: "transform opacity-100 scale-100"
          Leaving: "transition ease-in duration-75"
            From: "transform opacity-100 scale-100"
            To: "transform opacity-0 scale-95"
        -->
        <div id="user-dropdown-menu" class="origin-top-right absolute right-0 mt-2 w-100 rounded-md shadow-lg transform opacity-0 scale-95" style="display:none; z-index:999;" {#onmouseleave="ShowDropdown(this.id)"#}>
          <div class="py-1 rounded-md bg-white shadow-xs" role="menu" aria-orientation="vertical" aria-labelledby="user-menu">
            {% if current_user.is_authenticated and current_user.name %}
                <div class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition ease-in-out duration-150 remove-margin" role="menuitem">
                    <i class="si si-user mr-2"></i>
                    {{ current_user.name|title }}
                    {% if current_user.role == 'creator' and current_user.domain == subdomain %} (Admin){% endif %}
                </div>
            {% endif %}
              <div class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition ease-in-out duration-150 remove-margin" role="menuitem"><i class="si si-envelope mr-2"></i>{{ current_user.email }}</div>
            <div class="border-t border-gray-100"></div>

            {% if current_user.role == 'creator' and current_user.domain == subdomain and false %}
                <a href="{{ url_for('user.send_invite', subdomain=subdomain) }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition ease-in-out duration-150 remove-margin" role="menuitem" onclick="ShowInviteModal()"><i class="si si-share-alt mr-2"></i>Invite an admin</a>
            {% endif %}
            <a href="{{ url_for('user.settings', subdomain=subdomain) }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition ease-in-out duration-150 remove-margin" role="menuitem"><i class="si si-settings mr-2"></i>Settings</a>
            <a href="{{ url_for('user.logout', subdomain=subdomain) }}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition ease-in-out duration-150 remove-margin" role="menuitem"><i class="si si-logout mr-2"></i>Sign out</a>
          </div>
        </div>
      </div>

        <script>
            function ShowInviteModal() {
                var overlay = document.getElementById('invite-modal-overlay');
                var panel = document.getElementById('invite-modal-panel');

                if (overlay.classList.contains('opacity-0')){
                    overlay.classList.remove('opacity-0');
                    overlay.classList.add('opacity-100');

                    panel.classList.remove("opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95");
                    panel.classList.add("opacity-100 translate-y-0 sm:scale-100");
                }
                else {
                    overlay.classList.remove('opacity-100');
                    overlay.classList.add('opacity-0');

                    panel.classList.remove("opacity-100 translate-y-0 sm:scale-100");
                    panel.classList.add("opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95");
                }
            }
        </script>
    </body>
</html>
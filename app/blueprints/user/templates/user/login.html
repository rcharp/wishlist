{% extends 'layouts/login.html' %}
{% import 'macros/form.html' as f with context %}

{% block title %}Login - {{ 'site_name'|site_name_filter }}{% endblock %}

{% block body %}
    <head>
        <!-- Tailwind CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tailwindcss/ui@latest/dist/tailwind-ui.min.css">
    </head>
  <div class="row" style="margin-top:50px;">
    <div class="block-content" style="width:50%;min-width:300px;max-width:350px;margin:0 auto;
    border:1px solid #c5c5c5;border-radius:4px; padding:20px;float:none;margin-top:50px; background-color:#fff;">
    {% if subdomain %}
      {% call f.form_tag('user.login', subdomain=subdomain) %}
        <legend>Log in</legend>

        {% call f.form_group(form.identity, css_class='sm-margin-bottom', placeholder="Username or email",
                             autofocus='autofocus') %}
        {% endcall %}

        {% call f.form_group(form.password, css_class='sm-margin-bottom', placeholder="Password") %}
        {% endcall %}

        <div class="row">
          <div class="col-md-6">
            <button type="submit" class="btn btn-block bg-indigo-500 text-white-800">
                <span style="color:white">Log In</span>
            </button>
          </div>
          <div class="col-md-6">
            <div class="visible-xs visible-sm sm-margin-top"></div>
            <a href="{{ url_for('user.signup', subdomain=subdomain) }}"
               class="btn btn-default btn-block">
              Sign Up
            </a>
          </div>
        </div>
      {% endcall %}
    {% else %}
        {% call f.form_tag('user.no_company_login', email='') %}
        <legend>Start your free 14-day trial</legend>

        {% call f.form_group(form.identity, css_class='sm-margin-bottom', placeholder="Username or email",
                             autofocus='autofocus') %}
        {% endcall %}

        {% call f.form_group(form.company, css_class='sm-margin-bottom',
                             placeholder='Company name') %}
        {% endcall %}

         <div id="domain-group" class="input-group" style="margin-bottom:25px;">
            {% call f.form_group(form.domain, css_class='sm-margin-bottom',
                placeholder='Domain') %}
            {% endcall %}
            <span class="input-group-addon bg-white">.getwishlist.io</span>
         </div>

        {% call f.form_group(form.password, css_class='sm-margin-bottom', placeholder="Password") %}
        {% endcall %}

        <div class="row">
          <div class="col-md-6">
            <button type="submit" class="btn btn-block bg-indigo-500 text-white-800">
                <span style="color:white">Log In</span>
            </button>
          </div>
          <div class="col-md-6">
            <div class="visible-xs visible-sm sm-margin-top"></div>
            <a href="{{ url_for('user.signup', subdomain=subdomain) }}"
               class="btn btn-default btn-block">
              Sign Up
            </a>
          </div>
        </div>
      {% endcall %}
    {% endif %}
      <div class="text-center md-margin-top">
        <a href="{{ url_for('user.begin_password_reset', subdomain=subdomain) }}" class="text-muted">
          Forgot your password?
        </a>
      </div><br />
        <small>By logging in you agree to our <a href="{{ url_for('page.privacy') }}">Privacy Policy</a> and <a href="{{ url_for('page.terms') }}">Terms of Service</a></small>
    </div>
  </div>

    <script>
        document.getElementById("company").addEventListener("keyup", function(){
            document.getElementById("domain").value = document.getElementById("company").value;
        });

        $( document ).ready(function() {
            document.body.classList = 'bg-inidgo-500';
        });
    </script>
{% endblock %}
